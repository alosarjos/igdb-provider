image: alpine/edge
packages:
  - openssl-dev
  - rust
  - cargo
sources:
  - https://git.sr.ht/~alosarjos/igdb-provider
secrets:
  - 00f11c1f-fb64-402f-a674-a977cf05eba4
tasks:
  - setup: |
      set +x
      . ~/.buildsecrets
      set -x
  - build: |
      cd igdb-provider
      cargo build
  - test: |
      cd igdb-provider
      cargo test